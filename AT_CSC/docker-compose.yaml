version: '3.6'

services:

  atptg:
    image: ts-dockerhub.lsst.org/ptkernel:v1.1.0_rc4_b42
    container_name: atptg
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
      - TELESCOPE=AuxTel
    networks:
      control-network:
        ipv4_address: "139.229.170.231"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"

  atdome:
    image: lsstts/atdome:v1.1_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: atdome
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./atdome_setup.sh:/home/saluser/.setup.sh
    networks:
      control-network:
        ipv4_address: "139.229.170.232"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"

  atdometrajectory:
    image: lsstts/atdometrajectory:v1.2_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: atdometrajectory
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./atdometrajectory_setup.sh:/home/saluser/.setup.sh
    networks:
      control-network:
        ipv4_address: "139.229.170.233"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"
  athexapod:
    image: lsstts/athexapod:v0.4_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: athexapod
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./athexapod_setup.sh:/home/saluser/.setup.sh
    networks:
      control-network:
        ipv4_address: "139.229.170.234"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"
  ataos:
    image: lsstts/ataos:v1.5_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: ataos
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./ataos_setup.sh:/home/saluser/.setup.sh
    networks:
      control-network:
        ipv4_address: "139.229.170.235"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"

  atheaderservice:
    image: lsstts/at_headerservice:v1.4.0_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: atheaderservice
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./aths_setup.sh:/home/saluser/.setup.sh
      - /home/saluser/ATHS_data/www/:/home/saluser/www/
    networks:
      control-network:
        ipv4_address: "139.229.170.236"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"

  atspectrograph:
    image: lsstts/atspec:v0.5_salobj_v5.4.0_idl_v1.1.2_xml_v4.7.0
    container_name: atspectrograph
    environment:
      - LSST_DDS_DOMAIN=lsatmcs
    volumes:
      - ./atspec_setup.sh:/home/saluser/.setup.sh
    networks:
      control-network:
        ipv4_address: "139.229.170.230"
    logging:
        driver: "json-file"
        options:
            max-file: "5"
            max-size: "10m"

networks:
  default:
    external:
      name: control-network
  control-network:
    external: true
